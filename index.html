
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="An interactive view of the housing boom and bust">
     <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
     <title>An interactive view of the housing boom and bust</title>



<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@urbaninstitute">
<meta name="twitter:creator" content="@urbaninstitute">
<meta name="twitter:title" content="An interactive view of the housing boom and bust">
<meta name="twitter:description" content="An interactive map of the US containing the most recent mortgage data reveals that minorities have been left behind in the housing recovery in many places.">
<meta name="twitter:image" content="https://apps.urban.org/features/mortgages-by-race/img/social/thumb.png">
<meta property="og:title" content="An interactive view of the housing boom and bust" />
<meta property="og:description" content="An interactive map of the US containing the most recent mortgage data reveals that minorities have been left behind in the housing recovery in many places." />
<meta property="og:image" content="https://apps.urban.org/features/mortgages-by-race/img/social/thumb.png" />
<meta property="og:image:type" content="image/jpeg">
<meta property="og:url" content="http://urbn.is/MortgageByRace">


<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "NewsArticle",
	"headline": "An interactive view of the housing boom and bust",
	"url": "http://apps.urban.org/features/mortgages-by-race/",
	"thumbnailUrl": "https://apps.urban.org/features/mortgages-by-race/img/social/thumb.png",
	"dateCreated": "2017-11-07T05:00:00.000Z",
	"articleSection": "Interactive Feature",
	"creator": ["Bing Bai","Bhargavi Ganesh"],
	"keywords": ["Finance","Housing and Housing Finance","Neighborhoods, Cities, and Metros","Race and Ethnicity"]
}
</script>

 <script src="https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css" rel="stylesheet" />

<link href="http://fonts.googleapis.com/css?family=Lato:100,200,300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/hmda-v5.css" />
    <link href="css/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<!--for the header-->
<link rel="stylesheet" type="text/css" href="css/urban-header.css">

<!--project style sheet-->
<link rel="stylesheet" href="css/style.css" type="text/css">






  </head>

  <body class="ub-body">

  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MKBD2W"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MKBD2W');</script>
<!-- End Google Tag Manager -->

              <div id="header-pinned" class="no-touch">




               <a target="_blank" href="http://www.urban.org" title="Home" rel="home" class="site-logo"></a>
            <div class="title"><span class="feature-link"><a href="http://www.urban.org/features" class="title-linkback" alt="Urban Institute logo">Features</a> <span>: :</span> </span><a href="index.html" class="title-linkback">An interactive view of the housing boom and bust</a>
            </div>
            <div class="share-icons">
                <div class="shareThisP">
                    <span onclick="toggle_visibility('shareBox');">
                            <div class="shareThisB"></div>
                        </span>
                    <div class="shareThisW" id="shareBox">

                        <div class="addthis_toolbox addthis_default_style  "addthis:title="" addthis:url="">
                            <a href="https://www.facebook.com/sharer/sharer.php?u=http://urbn.is/MortgageByRace" target="_blank" class="addthis_button_facebook at300b" title="Facebook" onclick="toggle_visibility('shareBox');"><span class="at4-icon aticon-facebook" style="background-color: rgb(48, 88, 145);"><span class="at_a11y">Share on facebook</span></span></a>

                            <a href="https://twitter.com/home?status=New%20@urbaninstitute%20interactive:%20Breaking%20down%20mortgages%20by%20race%20http://urbn.is/MortgageByRace%20%23HMDA" target="_blank" class="addthis_button_twitter at300b" title="Tweet" onclick="toggle_visibility('shareBox');"><span class="at4-icon aticon-twitter" style="background-color: rgb(44, 168, 210);"><span class="at_a11y">Share on twitter</span></span></a>

                            <a href="mailto:%20?Subject=New interactive feature by the Urban Institute&amp;Body=Hi! I thought you'd be interested in this new interactive feature from the Urban Institute: “A new view of the housing boom and bust” http://urbn.is/MortgageByRace" target="_blank" class="addthis_button_email at300b" target="_blank" title="Email" onclick="toggle_visibility('shareBox');"><span class="at4-icon aticon-email" style="background-color: rgb(115, 138, 141);"><span class="at_a11y">Share on email</span></span></a>
                            <div class="atclear"></div>
                        </div>

                    </div>
                </div>
            </div>



         </div>









          <div class="wrapper">





                <section class="container clearfix" >
        <div class="row">
          <div class="full-col">

          <div id="ub-hmda-container">
		<div id="ub-map-container">
			<div class="ub-intro-wrap">
				<div class="ub-intro">
					<h1>An interactive view of the housing boom and bust</h1>
					<p class="ub-intro-italic">This map was originally published in September 2013 and has been updated annually as new Home Mortgage Disclosure Act data become available. This 2020 update incorporates 2019 mortgage originations and includes information on purchase and refinance loans.</p>
					<p class="ub-top">Since 2008, the tight credit environment has <a href="https://www.urban.org/policy-centers/housing-finance-policy-center/projects/housing-credit-availability-index" target="_blank">constrained mortgage lending</a> and <a href="https://www.urban.org/urban-wire/increasing-access-mortgages-minorities" target="_blank">disproportionately affected Black and Hispanic households</a>. As a result, these communities found it hard to take advantage of the low home prices and low interest rates that followed the housing market crash, missing an important opportunity to <a href="https://www.urban.org/research/publication/less-equal-racial-disparities-wealth-accumulation" target="_blank">build wealth through homeownership</a>. Credit remains tight today while home prices have now exceeded their precrisis peak, further limiting affordable housing options for minority homebuyers.</p>
				</div>
			</div>
			<div id="ub-loading-overlay">
				<div class="ub-loading"><p><i class="fa fa-refresh fa-fw fa-spin"></i> Loading...</p></div>
			</div>
			<div id="ub-cities-wrap">
				<div id="ub-cities">
					<div class="ub-cities-icon"></div>
				</div>
			</div>
			<div class="ub-legend-left">
				<p>One dot equals 10 mortgages</p>
			</div>
			<div class="ub-legend-right">
				<nav id="ub-menu">
					<div class="ub-pointers">
						<p class="ub-pointer-purchased">Purchased</p>
						<p class="ub-pointer-refinanced">Refinanced</p>
					</div>
					<ul>
						<li>All</li>
						<li>Asian</li>
						<li>Hispanic</li>
						<li>Black</li>
						<li>White</li>
					</ul>
					<a href="#" class="ub-button active" data-id="" title="All purchased" id="ub-purchase-all-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="All refinanced" id="ub-refinance-all-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="Asian purchased" id="ub-purchase-asian-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="Asian refinanced" id="ub-refinance-asian-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="Hispanic purchased" id="ub-purchase-hispanic-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="Hispanic refinanced" id="ub-refinance-hispanic-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="Black purchased" id="ub-purchase-black-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="Black refinanced" id="ub-refinance-black-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="White purchased" id="ub-purchase-white-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
					<a href="#" class="ub-button active" data-id="" title="White refinanced" id="ub-refinance-white-link"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-check" aria-hidden="true"></i></a>
				</nav>
			</div>
			<div id="ub-map-container-wrap">
				<div id="ub-map-year" class="slide showing">
					<div class="ub-map-gradient"></div>
				</div>
				<div id="ub-map-year-blur" class="slide">
					<div class="ub-map-gradient"></div>
				</div>
			</div>
			<div id="ub-map-text">
				<div class="ub-map-gradient"></div>
			</div>
			<div id="ub-map">
				<div class="ub-map-gradient"></div>
			</div>
		</div>
		<div id="ub-container">
			<div class="ub-graphic-container">
				<button class="ub-controls active" id="pause">&#10074;&#10074;</button>
				<ul>
					<li><a class="ub-year-active" id="ub-2001" title="Click to see the 2001 data">2001</a></li>
					<li><a class="ub-year" id="ub-2002" title="Click to see the 2002 data">2002</a></li>
					<li><a class="ub-year" id="ub-2003" title="Click to see the 2003 data">2003</a></li>
					<li><a class="ub-year" id="ub-2004" title="Click to see the 2004 data">2004</a></li>
					<li><a class="ub-year" id="ub-2005" title="Click to see the 2005 data">2005</a></li>
					<li><a class="ub-year" id="ub-2006" title="Click to see the 2006 data">2006</a></li>
					<li><a class="ub-year" id="ub-2007" title="Click to see the 2007 data">2007</a></li>
					<li><a class="ub-year" id="ub-2008" title="Click to see the 2008 data">2008</a></li>
					<li><a class="ub-year" id="ub-2009" title="Click to see the 2009 data">2009</a></li>
					<li><a class="ub-year" id="ub-2010" title="Click to see the 2010 data">2010</a></li>
					<li><a class="ub-year" id="ub-2011" title="Click to see the 2011 data">2011</a></li>
					<li><a class="ub-year" id="ub-2012" title="Click to see the 2012 data">2012</a></li>
					<li><a class="ub-year" id="ub-2013" title="Click to see the 2013 data">2013</a></li>
					<li><a class="ub-year" id="ub-2014" title="Click to see the 2014 data">2014</a></li>
					<li><a class="ub-year" id="ub-2015" title="Click to see the 2015 data">2015</a></li>
					<li><a class="ub-year" id="ub-2016" title="Click to see the 2016 data">2016</a></li>
					<li><a class="ub-year" id="ub-2017" title="Click to see the 2017 data">2017</a></li>
                    <li><a class="ub-year" id="ub-2018" title="Click to see the 2018 data">2018</a></li>
                    <li><a class="ub-year" id="ub-2019" title="Click to see the 2019 data">2019</a></li>
				</ul>
			</div>
			<div class="ub-footer-text">
				<p class="ub-intro-italic">This map was originally published in September 2013 and has been updated annually as new Home Mortgage Disclosure Act data become available. This 2018 update incorporates 2017 mortgage originations and includes information on purchase and refinance loans.</p>
				<p class="ub-bottom">Since 2008, the tight credit environment has&nbsp;<a href="https://www.urban.org/policy-centers/housing-finance-policy-center/projects/housing-credit-availability-index" target="_blank">constrained mortgage lending</a>&nbsp;and&nbsp;<a href="https://www.urban.org/urban-wire/increasing-access-mortgages-minorities" target="_blank">disproportionately affected Black and Hispanic households</a>. As a result, these communities found it hard to take advantage of the low home prices and low interest rates that followed the housing market crash, missing an important opportunity to&nbsp;<a href="https://www.urban.org/research/publication/less-equal-racial-disparities-wealth-accumulation" target="_blank">build wealth through homeownership</a>. Credit remains tight today while home prices have reached their precrisis peak, further limiting affordable housing options for minority homebuyers.</p>
			</div>
			<div class="ub-graphic-footer">
				<p><strong>Source:</strong> Urban Institute analysis of Home Mortgage Disclosure Act data. Home Price Index is based on the Home Price Index by Black Knight Financial Services. <br> <strong>Note:</strong> Includes owner-occupied mortgages only.</p>
				<p class="ub-urban"><span>Urban</span> Institute</p>
			</div>
		</div>
    </div> <!-- Close of div#ub-hmda-container -->

          </div></div></section>






</div>

    <footer>

     <div class="content" style="padding-left:2%; padding-right:2%">




                    <h4>Project credits</h4>
                    <div class="urbanstatement">
                      <p>The Housing Finance Policy Center (HFPC), which produced this map, was launched with generous support at the leadership level from the Citi Foundation and John D. and Catherine T. MacArthur Foundation. Additional support was provided by The Ford Foundation and The Open Society Foundation.</p>
                      <p>Ongoing support for HFPC is also provided by the Housing Finance Innovation Forum, a group of organizations and individuals that support high-quality independent research that informs evidence-based policy development. Funds raised through the Forum provide flexible resources, allowing HFPC to anticipate and respond to emerging policy issues with timely analysis. This funding supports HFPC&rsquo;s research, outreach and engagement, and general operating activities.</p>
                      <p>This feature was funded by these combined sources. We are grateful to them and to all our funders, who make it possible for Urban to advance its mission.</p>
                      <p>The views expressed are those of the authors and should not be attributed to the Urban Institute, its trustees, or its funders. Funders do not determine research findings or the insights and recommendations of our experts. More information on our funding principles is available <a href="https://www.urban.org/support" target="_blank">here</a>. Read our terms of service <a href="https://www.urban.org/terms-service" target="_blank">here</a>.</p>
                    </div>

                    <h3 class="job">Research</h3>
                  <p><a href="https://www.urban.org/author/sarah-strochak" target="new">Sarah Strochak</a> and <a href="https://www.urban.org/author/aaron-r-williams" target="new">Aaron Williams</a></p>
<h3 class="job">Design and Development</h3>
<p>5W Infographics, <a href="https://www.urban.org/author/benjamin-chartoff" target="new">Ben Chartoff</a>, <a href="https://www.urban.org/author/jerry-ta" target="new">Jerry Ta</a>, and <a href="https://www.urban.org/author/alice-feng" target="new">Alice Feng</a></p>
<h3 class="job">Editorial</h3>
                    <p><a href="https://www.urban.org/author/david-hinson" target="new">David Hinson</a> and <a href="https://www.urban.org/author/alex-tammaro" target="new">Alex Tammaro</a></p>
                    <h3 class="job">Writing</h3>
                    <p><a href="https://www.urban.org/author/sheryl-pardo" target="new">Sheryl Pardo</a></p>
                    <div class="credits">Last updated July 21, 2020. <a href="http://www.urban.org/" target = "_blank">Urban Institute</a>. <a href="https://github.com/UrbanInstitute/MortgagesByRace" target="_blank">View this project on Github.</a></div>


    </div>
    </footer>

<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script src="js/header.js"></script>

<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script>
		mapboxgl.accessToken = 'pk.eyJ1IjoidXJiYW5pbnN0aXR1dGUiLCJhIjoiTEJUbmNDcyJ9.mbuZTy4hI_PWXw3C3UFbDQ';

		var PurAsianOff = false;
		var RefiAsianOff = false;
		var PurHispanicOff = false;
		var RefiHispanicOff = false;
		var PurBlackOff = false;
		var RefiBlackOff = false;
		var PurWhiteOff = false;
		var RefiWhiteOff = false;

		var allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];

		var toggleableLayerIds2001 = [ '2001purchaseasiannewgeojson', '2001refinanceasiannewgeojson', '2001purchasehisnewgeojson', '2001refinancehisnewgeojson', '2001purchaseaanewgeojson', '2001refinanceaanewgeojson', '2001purchasenhwnewgeojson', '2001refinancenhwnew15geojson' ];
		var toggleableLayerIds2002 = [ '2002purchaseasiannewgeojson', '2002refinanceasiannewgeojson', '2002purchasehisnewgeojson', '2002refinancehisnewgeojson', '2002purchaseaanewgeojson', '2002refinanceaanewgeojson', '2002purchasenhwnewgeojson', '2002refinancenhwnewgeojson' ];
		var toggleableLayerIds2003 = [ '2003purchaseasiannewgeojson', '2003refinanceasiannewgeojson', '2003purchasehisnewgeojson', '2003refinancehisnewgeojson', '2003purchaseaanewgeojson', '2003refinanceaanewgeojson', '2003purchasenhwnewgeojson', '2003refinancenhwnew5geojson' ];
		var toggleableLayerIds2004 = [ '2004purchaseasiannewgeojson', '2004refinanceasiannewgeojson', '2004purchasehisnewgeojson', '2004refinancehisnewgeojson', '2004purchaseaanewgeojson', '2004refinanceaanewgeojson', '2004purchasenhwnewgeojson', '2004refinancenhwnew2geojson' ];
		var toggleableLayerIds2005 = [ '2005purchaseasiannewgeojson', '2005refinanceasiannewgeojson', '2005purchasehisnewgeojson', '2005refinancehisnewgeojson', '2005purchaseaanewgeojson', '2005refinanceaanewgeojson', '2005purchasenhwnewgeojson', '2005refinancenhwnewgeojson' ];
		var toggleableLayerIds2006 = [ '2006purchaseasiannewgeojson', '2006refinanceasiannewgeojson', '2006purchasehisnewgeojson', '2006refinancehisnewgeojson', '2006purchaseaanewgeojson', '2006refinanceaanewgeojson', '2006purchasenhwnewgeojson', '2006refinancenhwnewgeojson' ];
		var toggleableLayerIds2007 = [ '2007purchaseasiannewgeojson', '2007refinanceasiannewgeojson', '2007purchasehisnewgeojson', '2007refinancehisnewgeojson', '2007purchaseaanewgeojson', '2007refinanceaanewgeojson', '2007purchasenhwnewgeojson', '2007refinancenhwnewgeojson' ];
		var toggleableLayerIds2008 = [ '2008purchaseasiannewgeojson', '2008refinanceasiannewgeojson', '2008purchasehisnewgeojson', '2008refinancehisnewgeojson', '2008purchaseaanewgeojson', '2008refinanceaanewgeojson', '2008purchasenhwnewgeojson', '2008refinancenhwnewgeojson' ];
		var toggleableLayerIds2009 = [ '2009purchaseasiannewgeojson', '2009refinanceasiannewgeojson', '2009purchasehisnewgeojson', '2009refinancehisnewgeojson', '2009purchaseaanewgeojson', '2009refinanceaanewgeojson', '2009purchasenhwnewgeojson', '2009refinancenhwnewgeojson' ];
		var toggleableLayerIds2010 = [ '2010purchaseasiannewgeojson', '2010refinanceasiannewgeojson', '2010purchasehisnewgeojson', '2010refinancehisnewgeojson', '2010purchaseaanewgeojson', '2010refinanceaanewgeojson', '2010purchasenhwnewgeojson', '2010refinancenhwnewgeojson' ];
		var toggleableLayerIds2011 = [ '2011purchaseasiannewgeojson', '2011refinanceasiannewgeojson', '2011purchasehisnewgeojson', '2011refinancehisnewgeojson', '2011purchaseaanewgeojson', '2011refinanceaanewgeojson', '2011purchasenhwnewgeojson', '2011refinancenhwnewgeojson' ];
		var toggleableLayerIds2012 = [ '2012purchaseasiannewgeojson', '2012refinanceasiannewgeojson', '2012purchasehisnewgeojson', '2012refinancehisnewgeojson', '2012purchaseaanewgeojson', '2012refinanceaanewgeojson', '2012purchasenhwnewgeojson', '2012refinancenhwnewgeojson' ];
		var toggleableLayerIds2013 = [ '2013purchaseasiannewgeojson', '2013refinanceasiannewgeojson', '2013purchasehisnewgeojson', '2013refinancehisnewgeojson', '2013purchaseaanewgeojson', '2013refinanceaanewgeojson', '2013purchasenhwnewgeojson', '2013refinancenhwnewgeojson' ];
		var toggleableLayerIds2014 = [ '2014purchaseasiannewgeojson', '2014refinanceasiannewgeojson', '2014purchasehisnewgeojson', '2014refinancehisnewgeojson', '2014purchaseaanewgeojson', '2014refinanceaanewgeojson', '2014purchasenhwnewgeojson', '2014refinancenhwnewgeojson' ];
		var toggleableLayerIds2015 = [ '2015purchaseasiannew2geojson', '2015refinanceasiannew2geojson', '2015purchasehisnew2geojson', '2015refinancehisnew2geojson', '2015purchaseaanew2geojson', '2015refinanceaanew2geojson', '2015purchasenhwnew2geojson', '2015refinancenhwnew2geojson' ];
		var toggleableLayerIds2016 = [ '2016purchaseasiannewgeojson', '2016refinanceasiannewgeojson', '2016purchasehisnewgeojson', '2016refinancehisnewgeojson', '2016purchaseaanewgeojson', '2016refinanceaanewgeojson', '2016purchasenhwnewgeojson', '2016refinancenhwnewgeojson' ];
		var toggleableLayerIds2017 = [ '2017purchaseasiangeojson', '2017refinanceasiangeojson', '2017purchasehisgeojson', '2017refinancehisgeojson', '2017purchaseaageojson', '2017refinanceaageojson', '2017purchasenhwgeojson', '2017refinancenhwgeojson' ];
        var toggleableLayerIds2018 = [ 'uspurchase2018asian', 'usrefi2018asian', 'uspurchase2018his', 'usrefi2018his', 'uspurchase2018aa', 'usrefi2018aa', 'uspurchase2018nhw', 'usrefi2018nhw' ];
        var toggleableLayerIds2019 = [ 'uspurchase2019asian', 'usrefi2019asian', 'uspurchase2019his', 'usrefi2019his', 'uspurchase2019aa', 'usrefi2019aa', 'uspurchase2019nhw', 'usrefi2019nhw' ];

		var allToggles = [ toggleableLayerIds2001, toggleableLayerIds2002, toggleableLayerIds2003, toggleableLayerIds2004, toggleableLayerIds2005, toggleableLayerIds2006, toggleableLayerIds2007, toggleableLayerIds2008, toggleableLayerIds2009, toggleableLayerIds2010, toggleableLayerIds2011, toggleableLayerIds2012, toggleableLayerIds2013, toggleableLayerIds2014, toggleableLayerIds2015, toggleableLayerIds2016, toggleableLayerIds2017, toggleableLayerIds2018,
            toggleableLayerIds2019 ];
		var allTogglesBlur = [ toggleableLayerIds2002, toggleableLayerIds2003, toggleableLayerIds2004, toggleableLayerIds2005, toggleableLayerIds2006, toggleableLayerIds2007, toggleableLayerIds2008, toggleableLayerIds2009, toggleableLayerIds2010, toggleableLayerIds2011, toggleableLayerIds2012, toggleableLayerIds2013, toggleableLayerIds2014, toggleableLayerIds2015, toggleableLayerIds2016, toggleableLayerIds2017, toggleableLayerIds2018, toggleableLayerIds2019, toggleableLayerIds2001 ];

		var mapYearBox = document.getElementById('ub-map-year');
		var mapEffect = document.getElementById('ub-map-year-blur');

		var	mapBase = new mapboxgl.Map({
      		container: 'ub-map',
      		style: 'mapbox://styles/urbaninstitute/cj8otpvg492922rnox8pjw8dg?optimize=true',
			center: [-95,42.15],
			pitchWithRotate: false,
			renderWorldCopies: false,
			minZoom: 3.6,
			maxZoom: 10.6,
			zoom: 3.6
    	});
		mapBase.addControl(new mapboxgl.NavigationControl());
		mapBase.scrollZoom.disable();
		mapBase.dragRotate.disable();
		mapBase.touchZoomRotate.disableRotation();

		var	mapBaseText = new mapboxgl.Map({
      		container: 'ub-map-text',
      		style: 'mapbox://styles/urbaninstitute/cj8ujp4fnedvf2roxntalqmwq?optimize=true',
			center: [-95,42.15],
			pitchWithRotate: false,
			renderWorldCopies: false,
			minZoom: 3.6,
			maxZoom: 10.6,
			zoom: 3.6
    	});
		mapBaseText.addControl(new mapboxgl.NavigationControl());
		mapBaseText.scrollZoom.disable();
		mapBaseText.dragRotate.disable();
		mapBaseText.touchZoomRotate.disableRotation();


		var	mapYear = new mapboxgl.Map({
      		container: 'ub-map-year',
			style: 'mapbox://styles/urbaninstitute/cj95zz8wo03v22smcahc1rbbm?optimize=true', // 2001 reduced
			center: [-95,42.15],
			pitchWithRotate: false,
			renderWorldCopies: false,
			minZoom: 3.6,
			maxZoom: 10.6,
			zoom: 3.6
    	});
		mapYear.addControl(new mapboxgl.NavigationControl());
		mapYear.scrollZoom.disable();
		mapYear.dragRotate.disable();
		mapYear.touchZoomRotate.disableRotation();


		var	mapYearBlur = new mapboxgl.Map({
      		container: 'ub-map-year-blur',
			style: 'mapbox://styles/urbaninstitute/cj97f3n4a18pa2rnxf4jqspw3?optimize=true', // 2002 reduced
			center: [-95,42.15],
			pitchWithRotate: false,
			renderWorldCopies: false,
			minZoom: 3.6,
			maxZoom: 10.6,
			zoom: 3.6
    	});
		mapYearBlur.addControl(new mapboxgl.NavigationControl());
		mapYearBlur.scrollZoom.disable();
		mapYearBlur.dragRotate.disable();
		mapYearBlur.touchZoomRotate.disableRotation();


		// ********************* START
		setTimeout(function(){
			$('#ub-loading-overlay').fadeOut(800);
		}, 1500);
		setTimeout(function(){
			mapSlideshow();
		},3000);


		// ********************* ZOOM TO CITIES
		var cities = {
			'seattle': {
        		center: [-122.335167,47.608013],
        		zoom: 10.6,
        		pitch: 0
			},
			'sanfrancisco': {
        		center: [-122.431297,37.773972],
        		zoom: 10.6,
        		pitch: 0
			},
			'losangeles': {
        		center: [-118.243683,34.052235],
        		zoom: 10.6,
        		pitch: 0
			},
			'phoenix': {
        		center: [-112.074036,33.448376],
        		zoom: 10.6,
        		pitch: 0
			},
			'dallas': {
        		center: [-96.805077,32.783585],
        		zoom: 10.6,
        		pitch: 0
			},
			'houston': {
        		center: [-95.366302,29.761993],
        		zoom: 10.6,
        		pitch: 0
			},
			'chicago': {
        		center: [-87.623177,41.881832],
        		zoom: 10.6,
        		pitch: 0
			},
			'detroit': {
        		center: [-83.060303,42.348495],
        		zoom: 10.6,
        		pitch: 0
			},
			'atlanta': {
        		center: [-84.386330,33.753746],
        		zoom: 10.6,
        		pitch: 0
			},
			'nyc': {
        		center: [-73.968285,40.785091],
        		zoom: 10.6,
        		pitch: 0
			},
			'philly': {
        		center: [-75.165222,39.952583],
        		zoom: 10.6,
        		pitch: 0
			},
			'wasdc': {
        		center: [-77.036560,38.897957],
        		zoom: 10.6,
        		pitch: 0
			},
			'miami': {
        		center: [-80.191788,25.761681],
        		zoom: 10.6,
        		pitch: 0
			},
            'minneapolis': {
                center: [-93.235857, 44.962461],
                zoom: 10.6,
                pitch: 0
            },
		};

		var cityNames = Object.keys(cities);
		var citiesLength = cityNames.length;
		for (var cc = 0; cc < citiesLength; cc++) {
        	var cityName = cityNames[cc];
			var cityNameLong = '';
			if (cc==0) {
				cityNameLong = 'Seattle';
			} else if (cc==1) {
				cityNameLong = 'San Francisco';
			} else if (cc==2) {
				cityNameLong = 'Los Angeles';
			} else if (cc==3) {
				cityNameLong = 'Phoenix';
			} else if (cc==4) {
				cityNameLong = 'Dallas';
			} else if (cc==5) {
				cityNameLong = 'Houston';
			} else if (cc==6) {
				cityNameLong = 'Chicago';
			} else if (cc==7) {
				cityNameLong = 'Detroit';
			} else if (cc==8) {
				cityNameLong = 'Atlanta';
			} else if (cc==9) {
				cityNameLong = 'New York City';
			} else if (cc==10) {
				cityNameLong = 'Philadelphia';
			} else if (cc==11) {
				cityNameLong = 'Washington, DC';
			} else if (cc==12) {
				cityNameLong = 'Miami';
			} else {
                cityNameLong = 'Minneapolis';
            }
			var cityButton = document.createElement('a');
			cityButton.href = '#';
			cityButton.className = 'ub-city-button';
    		cityButton.innerHTML = cityNameLong;
			cityButton.setAttribute("title", 'Click to center and zoom in on '+cityNameLong);
			cityButton.setAttribute("id", cityName);

			var cityButtons = document.getElementById('ub-cities');
			cityButtons.appendChild(cityButton);
		} // Close for (cities loop)

		document.getElementById('nyc').addEventListener('click', function () {
			mapBase.flyTo(cities['nyc']);
		});
		document.getElementById('losangeles').addEventListener('click', function () {
			mapBase.flyTo(cities['losangeles']);
		});
		document.getElementById('chicago').addEventListener('click', function () {
			mapBase.flyTo(cities['chicago']);
		});
		document.getElementById('dallas').addEventListener('click', function () {
			mapBase.flyTo(cities['dallas']);
		});
		document.getElementById('houston').addEventListener('click', function () {
			mapBase.flyTo(cities['houston']);
		});
		document.getElementById('wasdc').addEventListener('click', function () {
			mapBase.flyTo(cities['wasdc']);
		});
		document.getElementById('philly').addEventListener('click', function () {
			mapBase.flyTo(cities['philly']);
		});
		document.getElementById('miami').addEventListener('click', function () {
			mapBase.flyTo(cities['miami']);
		});
		document.getElementById('atlanta').addEventListener('click', function () {
			mapBase.flyTo(cities['atlanta']);
		});
		document.getElementById('sanfrancisco').addEventListener('click', function () {
			mapBase.flyTo(cities['sanfrancisco']);
		});
		document.getElementById('phoenix').addEventListener('click', function () {
			mapBase.flyTo(cities['phoenix']);
		});
		document.getElementById('detroit').addEventListener('click', function () {
			mapBase.flyTo(cities['detroit']);
		});
		document.getElementById('seattle').addEventListener('click', function () {
			mapBase.flyTo(cities['seattle']);
		});
        document.getElementById('minneapolis').addEventListener('click', function () {
            mapBase.flyTo(cities['minneapolis']);
        });

		// ********************* COORDINATION OF MOVEMENT AND SCALE BETWEEN MAPS
		var disable = false;
		mapBase.on("move", function() {
			if (!disable) {
				var center = mapBase.getCenter();
				var zoom = mapBase.getZoom();
				disable = true;
				mapBaseText.setCenter(center);mapBaseText.setZoom(zoom);
				mapYear.setCenter(center);mapYear.setZoom(zoom);
				mapYearBlur.setCenter(center);mapYearBlur.setZoom(zoom);
				disable = false;
    		}
		});
		mapBaseText.on("move", function() {
			if (!disable) {
				var center = mapBaseText.getCenter();
				var zoom = mapBaseText.getZoom();
				disable = true;
				mapBase.setCenter(center);mapBase.setZoom(zoom);
				mapYear.setCenter(center);mapYear.setZoom(zoom);
				mapYearBlur.setCenter(center);mapYearBlur.setZoom(zoom);
				disable = false;
    		}
		});
		mapYear.on("move", function() {
			if (!disable) {
				var center = mapYear.getCenter();
				var zoom = mapYear.getZoom();
				disable = true;
				mapBase.setCenter(center);mapBase.setZoom(zoom);
				mapBaseText.setCenter(center);mapBaseText.setZoom(zoom);
				mapYearBlur.setCenter(center);mapYearBlur.setZoom(zoom);
				disable = false;
    		}
		});
		mapYearBlur.on("move", function() {
			if (!disable) {
				var center = mapYearBlur.getCenter();
				var zoom = mapYearBlur.getZoom();
				disable = true;
				mapBase.setCenter(center);mapBase.setZoom(zoom);
				mapBaseText.setCenter(center);mapBaseText.setZoom(zoom);
				mapYear.setCenter(center);mapYear.setZoom(zoom);
				disable = false;
    		}
		});

		var currentYear = 0;
		var currentSlide = 0;
		var previousSlide = 0;

		// ********************* SLIDESHOW OF YEARS
		function mapSlideshow() {
			var to = null;
			var yearButtons = document.querySelectorAll('.ub-graphic-container ul li a');
			var yearButtonsLength = yearButtons.length;

			var slides = [
				'cj95zz8wo03v22smcahc1rbbm', // 2001 reduced
				'cj97f3n4a18pa2rnxf4jqspw3', // 2002 reduced
				'cj991g5az2w8w2rlbsfrlkkn8', // 2003 reduced 2
				'cj992l2pa2x722rqo9mabcuf2', // 2004 reduced 2
				'cj98q8p712lwu2rqe62fjoat6', // 2005 reduced
				'cj98qlqoy2lro2sn7gikvnb3p', // 2006 reduced
				'cj99uxj2t2tjm2rmofueopcf4', // 2007 reduced
				'cj99we2wq2v0q2sth4fv683no', // 2008 reduced
				'cj99wey4u2u7d2rpeqodbnkcv', // 2009 reduced
				'cj9baenaq44xr2rqcj841rv0s', // 2010 reduced
				'cj9c38sg64vq42rqdxhzceyye', // 2011 reduced
				'cj9cnoz4k697b2slb1vj1hdwe', // 2012 reduced
				'cj9co512w5gar2stho27dw15r', // 2013 reduced
				'cj9coha735fmq2rqcvdy2z7fr', // 2014 reduced
				'cj9dz1s6y6nhp2so64kl7mmdc', // 2015 reduced
				'cj9e00xdr7j9z2spfqopedm2a', // 2016 reduced
				'cjhqcrb015lbb2so2yhipsav8', // 2017 reduced
                'ck0y9uu9h07oj1cujz0hzuym2', // 2018 reduced
                'ckcbzjo341tyz1ip5g2rs202k'  // 2019 reduced
			]
			var slidesBlur = [
				'cj97f3n4a18pa2rnxf4jqspw3', // 2002 reduced
				'cj991g5az2w8w2rlbsfrlkkn8', // 2003 reduced 2
				'cj992l2pa2x722rqo9mabcuf2', // 2004 reduced 2
				'cj98q8p712lwu2rqe62fjoat6', // 2005 reduced
				'cj98qlqoy2lro2sn7gikvnb3p', // 2006 reduced
				'cj99uxj2t2tjm2rmofueopcf4', // 2007 reduced
				'cj99we2wq2v0q2sth4fv683no', // 2008 reduced
				'cj99wey4u2u7d2rpeqodbnkcv', // 2009 reduced
				'cj9baenaq44xr2rqcj841rv0s', // 2010 reduced
				'cj9c38sg64vq42rqdxhzceyye', // 2011 reduced
				'cj9cnoz4k697b2slb1vj1hdwe', // 2012 reduced
				'cj9co512w5gar2stho27dw15r', // 2013 reduced
				'cj9coha735fmq2rqcvdy2z7fr', // 2014 reduced
				'cj9dz1s6y6nhp2so64kl7mmdc', // 2015 reduced
				'cj9e00xdr7j9z2spfqopedm2a', // 2016 reduced
				'cjhqcrb015lbb2so2yhipsav8', // 2017 reduced
                'ck0y9uu9h07oj1cujz0hzuym2', // 2018 reduced
                'ckcbzjo341tyz1ip5g2rs202k', // 2019 reduced
				'cj95zz8wo03v22smcahc1rbbm' // 2001 reduced
			]
			var slidesLength = slides.length;

			var slideInterval = setInterval(nextSlide,4000);
		//	clearInterval(slideInterval);

			function nextSlide(){
				goToSlide(currentSlide+1);
				to = setTimeout(function(){
					goToSlideBlur(currentSlide+1);
				}, 3500);
				goToYear(currentYear+1);
			}
			function previousSlide(){
				goToSlide(currentSlide-1);
				setTimeout(function(){
					goToSlideBlur(currentSlide-1);
				}, 3500);
				goToYear(currentYear-1);
			}

			function goToSlide(n){
				mapYearBox.className= 'slide showing';
				previousSlide = currentSlide;
				currentSlide = (n+slides.length)%slidesLength;
				mapYear.setStyle('mapbox://styles/urbaninstitute/'+slides[currentSlide]+'?optimize=true');
				mapYear.on('style.load', function() {
					loadToggle();
					mapEffect.className= 'slide';
				});
			}
			function goToSlideBlur(n){
				mapEffect.className= 'slide showing';
				mapYearBlur.setStyle('mapbox://styles/urbaninstitute/'+slidesBlur[currentSlide]+'?optimize=true');
				mapYearBlur.on('style.load', function() {
					loadToggleBlur();
					mapYearBox.className= 'slide';
				});
			}
			function goToSlideYear(n){
				mapEffect.className= 'slide showing';
				mapYearBlur.setStyle('mapbox://styles/urbaninstitute/'+slides[previousSlide]+'?optimize=true');
				mapYearBlur.on('style.load', function() {
					loadToggleYear();
					mapYearBox.className= 'slide';
				});
			}
			function goToYear(n){
				yearButtons[currentYear].className = 'ub-year';
				currentYear = (n+yearButtons.length)%yearButtonsLength;
				yearButtons[currentYear].className = 'ub-year-active';
			}

			var playing = true;
			var pauseButton = document.getElementById('pause');

			function pauseSlideshow(){
				pauseButton.innerHTML = '&#9658;'; // play character
				pauseButton.className = 'ub-controls';
				playing = false;
				clearInterval(slideInterval);
				if(to){
					clearTimeout(to);
  				}
			}

			function playSlideshow(){
				pauseButton.innerHTML = '&#10074;&#10074;'; // pause character
				pauseButton.className = 'ub-controls active';
				playing = true;
				slideInterval = setInterval(nextSlide,4000);
			}

			pauseButton.onclick = function(){
				if(playing){ pauseSlideshow(); }
				else{ playSlideshow(); }
			};

			// ********************* YEARS TOGGLE BUTTONS
			// 2001
			var button2001 = document.getElementById('ub-2001');
			button2001.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(0);
				}, 100);
				goToYear(0);
			};
			// 2002
			var button2002 = document.getElementById('ub-2002');
			button2002.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(1);
				}, 100);
				goToYear(1);
			};
			// 2003
			var button2003 = document.getElementById('ub-2003');
			button2003.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(2);
				}, 100);
				goToYear(2);
			};
			// 2004
			var button2004 = document.getElementById('ub-2004');
			button2004.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(3);
				}, 100);
				goToYear(3);
			};
			// 2005
			var button2005 = document.getElementById('ub-2005');
			button2005.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(4);
				}, 100);
				goToYear(4);
			};
			// 2006
			var button2006 = document.getElementById('ub-2006');
			button2006.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(5);
				}, 100);
				goToYear(5);
			};
			// 2007
			var button2007 = document.getElementById('ub-2007');
			button2007.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(6);
				}, 100);
				goToYear(6);
			};
			// 2008
			var button2008 = document.getElementById('ub-2008');
			button2008.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(7);
				}, 100);
				goToYear(7);
			};
			// 2009
			var button2009 = document.getElementById('ub-2009');
			button2009.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(8);
				}, 100);
				goToYear(8);
			};
			// 2010
			var button2010 = document.getElementById('ub-2010');
			button2010.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(9);
				}, 100);
				goToYear(9);
			};
			// 2011
			var button2011 = document.getElementById('ub-2011');
			button2011.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(10);
				}, 100);
				goToYear(10);
			};
			// 2012
			var button2012 = document.getElementById('ub-2012');
			button2012.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(11);
				}, 100);
				goToYear(11);
			};
			// 2013
			var button2013 = document.getElementById('ub-2013');
			button2013.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(12);
				}, 100);
				goToYear(12);
			};
			// 2014
			var button2014 = document.getElementById('ub-2014');
			button2014.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(13);
				}, 100);
				goToYear(13);
			};
			// 2015
			var button2015 = document.getElementById('ub-2015');
			button2015.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(14);
				}, 100);
				goToYear(14);
			};
			// 2016
			var button2016 = document.getElementById('ub-2016');
			button2016.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(15);
				}, 100);
				goToYear(15);
			};
			// 2017
			var button2017 = document.getElementById('ub-2017');
			button2017.onclick = function(){
				pauseSlideshow();
				setTimeout(function(){
					goToSlide(16);
				}, 100);
				goToYear(16);
			};
            // 2018
            var button2018 = document.getElementById('ub-2018');
            button2018.onclick = function(){
                pauseSlideshow();
                setTimeout(function(){
                    goToSlide(17);
                }, 100);
                goToYear(17);
            };
            // 2019
            var button2019 = document.getElementById('ub-2019');
            button2019.onclick = function(){
                pauseSlideshow();
                setTimeout(function(){
                    goToSlide(18);
                }, 100);
                goToYear(18);
            };
		};	// End of function mapSlideshow()



   		// ********************* LAYER TOGGLE

		// Purchase asian
    	var toggleableLayerPurAsian = [ '2001purchaseasiannewgeojson', '2002purchaseasiannewgeojson', '2003purchaseasiannewgeojson', '2004purchaseasiannewgeojson', '2005purchaseasiannewgeojson', '2006purchaseasiannewgeojson', '2007purchaseasiannewgeojson', '2008purchaseasiannewgeojson', '2009purchaseasiannewgeojson', '2010purchaseasiannewgeojson', '2011purchaseasiannewgeojson', '2012purchaseasiannewgeojson', '2013purchaseasiannewgeojson', '2014purchaseasiannewgeojson', '2015purchaseasiannew2geojson', '2016purchaseasiannewgeojson', '2017purchaseasiangeojson', 'uspurchase2018asian', 'uspurchase2019asian' ];
		var linkPurAsian = document.getElementById('ub-purchase-asian-link');
		linkPurAsian.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				for (var r = 0; r < toggleableLayerPurAsian.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerPurAsian[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'none');
					}
				}
				this.className = 'ub-button';
				PurAsianOff = true;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			} else {
				for (var r = 0; r < toggleableLayerPurAsian.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerPurAsian[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'visible');
					}
				}
				this.className = 'ub-button active';
				PurAsianOff = false;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			}
		};
		// Refinance asian
    	var toggleableLayerRefiAsian = [ '2001refinanceasiannewgeojson', '2002refinanceasiannewgeojson', '2003refinanceasiannewgeojson', '2004refinanceasiannewgeojson', '2005refinanceasiannewgeojson', '2006refinanceasiannewgeojson', '2007refinanceasiannewgeojson', '2008refinanceasiannewgeojson', '2009refinanceasiannewgeojson', '2010refinanceasiannewgeojson', '2011refinanceasiannewgeojson', '2012refinanceasiannewgeojson', '2013refinanceasiannewgeojson', '2014refinanceasiannewgeojson', '2015refinanceasiannew2geojson', '2016refinanceasiannewgeojson', '2017refinanceasiangeojson', 'usrefi2018asian', 'usrefi2019asian' ];
		var linkRefiAsian = document.getElementById('ub-refinance-asian-link');
		linkRefiAsian.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				for (var r = 0; r < toggleableLayerRefiAsian.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerRefiAsian[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'none');
					}
				}
				this.className = 'ub-button';
				RefiAsianOff = true;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			} else {
				for (var r = 0; r < toggleableLayerRefiAsian.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerRefiAsian[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'visible');
					}
				}
				this.className = 'ub-button active';
				RefiAsianOff = false;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			}
		};

		// Purchase hispanic
    	var toggleableLayerPurHispanic = [ '2001purchasehisnewgeojson', '2002purchasehisnewgeojson', '2003purchasehisnewgeojson', '2004purchasehisnewgeojson', '2005purchasehisnewgeojson', '2006purchasehisnewgeojson', '2007purchasehisnewgeojson', '2008purchasehisnewgeojson', '2009purchasehisnewgeojson', '2010purchasehisnewgeojson', '2011purchasehisnewgeojson', '2012purchasehisnewgeojson', '2013purchasehisnewgeojson', '2014purchasehisnewgeojson', '2015purchasehisnew2geojson', '2016purchasehisnewgeojson', '2017purchasehisgeojson', 'uspurchase2018his', 'uspurchase2019his' ];
		var linkPurHispanic = document.getElementById('ub-purchase-hispanic-link');
		linkPurHispanic.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				for (var r = 0; r < toggleableLayerPurHispanic.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerPurHispanic[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'none');
					}
				}
				this.className = 'ub-button';
				PurHispanicOff = true;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			} else {
				for (var r = 0; r < toggleableLayerPurHispanic.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerPurHispanic[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'visible');
					}
				}
				this.className = 'ub-button active';
				PurHispanicOff = false;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			}
		};
		// Refinance hispanic
    	var toggleableLayerRefiHispanic = [ '2001refinancehisnewgeojson', '2002refinancehisnewgeojson', '2003refinancehisnewgeojson', '2004refinancehisnewgeojson', '2005refinancehisnewgeojson', '2006refinancehisnewgeojson', '2007refinancehisnewgeojson', '2008refinancehisnewgeojson', '2009refinancehisnewgeojson', '2010refinancehisnewgeojson', '2011refinancehisnewgeojson', '2012refinancehisnewgeojson', '2013refinancehisnewgeojson', '2014refinancehisnewgeojson', '2015refinancehisnew2geojson', '2016refinancehisnewgeojson', '2017refinancehisgeojson', 'usrefi2018his', 'usrefi2019his' ];
		var linkRefiHispanic = document.getElementById('ub-refinance-hispanic-link');
		linkRefiHispanic.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				for (var r = 0; r < toggleableLayerRefiHispanic.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerRefiHispanic[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'none');
					}
				}
				this.className = 'ub-button';
				RefiHispanicOff = true;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			} else {
				for (var r = 0; r < toggleableLayerRefiHispanic.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerRefiHispanic[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'visible');
					}
				}
				this.className = 'ub-button active';
				RefiHispanicOff = false;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			}
		};

		// Purchase black
    	var toggleableLayerPurBlack = [ '2001purchaseaanewgeojson', '2002purchaseaanewgeojson', '2003purchaseaanewgeojson', '2004purchaseaanewgeojson', '2005purchaseaanewgeojson', '2006purchaseaanewgeojson', '2007purchaseaanewgeojson', '2008purchaseaanewgeojson', '2009purchaseaanewgeojson', '2010purchaseaanewgeojson', '2011purchaseaanewgeojson', '2012purchaseaanewgeojson', '2013purchaseaanewgeojson', '2014purchaseaanewgeojson', '2015purchaseaanew2geojson', '2016purchaseaanewgeojson', '2017purchaseaageojson', 'uspurchase2018aa', 'uspurchase2019aa' ];
		var linkPurBlack = document.getElementById('ub-purchase-black-link');
		linkPurBlack.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				for (var r = 0; r < toggleableLayerPurBlack.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerPurBlack[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'none');
					}
				}
				this.className = 'ub-button';
				PurBlackOff = true;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			} else {
				for (var r = 0; r < toggleableLayerPurBlack.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerPurBlack[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'visible');
					}
				}
				this.className = 'ub-button active';
				PurBlackOff = false;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			}
		};
		// Refinance black
    	var toggleableLayerRefiBlack = [ '2001refinanceaanewgeojson', '2002refinanceaanewgeojson', '2003refinanceaanewgeojson', '2004refinanceaanewgeojson', '2005refinanceaanewgeojson', '2006refinanceaanewgeojson', '2007refinanceaanewgeojson', '2008refinanceaanewgeojson', '2009refinanceaanewgeojson', '2010refinanceaanewgeojson', '2011refinanceaanewgeojson', '2012refinanceaanewgeojson', '2013refinanceaanewgeojson', '2014refinanceaanewgeojson', '2015refinanceaanew2geojson', '2016refinanceaanewgeojson', '2017refinanceaageojson', 'usrefi2018aa', 'usrefi2019aa' ];
		var linkRefiBlack = document.getElementById('ub-refinance-black-link');
		linkRefiBlack.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				for (var r = 0; r < toggleableLayerRefiBlack.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerRefiBlack[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'none');
					}
				}
				this.className = 'ub-button';
				RefiBlackOff = true;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			} else {
				for (var r = 0; r < toggleableLayerRefiBlack.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerRefiBlack[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'visible');
					}
				}
				this.className = 'ub-button active';
				RefiBlackOff = false;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			}
		};

		// Purchase white
    	var toggleableLayerPurWhite = [ '2001purchasenhwnewgeojson', '2002purchasenhwnewgeojson', '2003purchasenhwnewgeojson', '2004purchasenhwnewgeojson', '2005purchasenhwnewgeojson', '2006purchasenhwnewgeojson', '2007purchasenhwnewgeojson', '2008purchasenhwnewgeojson', '2009purchasenhwnewgeojson', '2010purchasenhwnewgeojson', '2011purchasenhwnewgeojson', '2012purchasenhwnewgeojson', '2013purchasenhwnewgeojson', '2014purchasenhwnewgeojson', '2015purchasenhwnew2geojson', '2016purchasenhwnewgeojson', '2017purchasenhwgeojson', 'uspurchase2018nhw', 'uspurchase2019nhw' ];
		var linkPurWhite = document.getElementById('ub-purchase-white-link');
		linkPurWhite.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				for (var r = 0; r < toggleableLayerPurWhite.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerPurWhite[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'none');
					}
				}
				this.className = 'ub-button';
				PurWhiteOff = true;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			} else {
				for (var r = 0; r < toggleableLayerPurWhite.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerPurWhite[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'visible');
					}
				}
				this.className = 'ub-button active';
				PurWhiteOff = false;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			}
		};
		// Refinance white
    	var toggleableLayerRefiWhite = [ '2001refinancenhwnew15geojson', '2002refinancenhwnewgeojson', '2003refinancenhwnew5geojson', '2004refinancenhwnew2geojson', '2005refinancenhwnewgeojson', '2006refinancenhwnewgeojson', '2007refinancenhwnewgeojson', '2008refinancenhwnewgeojson', '2009refinancenhwnewgeojson', '2010refinancenhwnewgeojson', '2011refinancenhwnewgeojson', '2012refinancenhwnewgeojson', '2013refinancenhwnewgeojson', '2014refinancenhwnewgeojson', '2015refinancenhwnew2geojson', '2016refinancenhwnewgeojson', '2017refinancenhwgeojson', 'usrefi2018nhw', 'usrefi2019nhw' ];
		var linkRefiWhite = document.getElementById('ub-refinance-white-link');
		linkRefiWhite.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				for (var r = 0; r < toggleableLayerRefiWhite.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerRefiWhite[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'none');
					}
				}
				this.className = 'ub-button';
				RefiWhiteOff = true;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			} else {
				for (var r = 0; r < toggleableLayerRefiWhite.length; r++) {
					if (r===currentYear) {
						var layerToggle = toggleableLayerRefiWhite[r];
						mapYear.setLayoutProperty(layerToggle, 'visibility', 'visible');
					}
				}
				this.className = 'ub-button active';
				RefiWhiteOff = false;
				allButtons = [ PurAsianOff, RefiAsianOff, PurHispanicOff, RefiHispanicOff, PurBlackOff, RefiBlackOff, PurWhiteOff, RefiWhiteOff ];
				toggleAllIf();
			}
		};

		// Purchase all
		var linkPurAll = document.getElementById('ub-purchase-all-link');
		function toggleAllIf() {
			if (PurAsianOff && PurHispanicOff && PurBlackOff && PurWhiteOff) {
				linkPurAll.className = 'ub-button';
			} else {
				linkPurAll.className = 'ub-button active';
			}
			if (RefiAsianOff && RefiHispanicOff && RefiBlackOff && RefiWhiteOff) {
				linkRefiAll.className = 'ub-button';
			} else {
				linkRefiAll.className = 'ub-button active';
			}
		};	// End of function toggleAllIf()

		linkPurAll.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				this.className = 'ub-button';
			} else {
				this.className = 'ub-button active';
			}
			document.getElementById('ub-purchase-asian-link').click();
			document.getElementById('ub-purchase-hispanic-link').click();
			document.getElementById('ub-purchase-black-link').click();
			document.getElementById('ub-purchase-white-link').click();
		};
		// Refinance all
		var linkRefiAll = document.getElementById('ub-refinance-all-link');
		linkRefiAll.onclick = function(te) {
			te.preventDefault();
        	te.stopPropagation();
			if (this.className=='ub-button active') {
				this.className = 'ub-button';
			} else {
				this.className = 'ub-button active';
			}
			document.getElementById('ub-refinance-asian-link').click();
			document.getElementById('ub-refinance-hispanic-link').click();
			document.getElementById('ub-refinance-black-link').click();
			document.getElementById('ub-refinance-white-link').click();
		};

		function loadToggle() {
			for (var zt = 0; zt < 8; zt++) {
				if(allButtons[zt]){
					var layerPreToggle = allToggles[currentSlide][zt];
					if (layerPreToggle!=='undefined') {
						mapYear.setLayoutProperty(layerPreToggle, 'visibility', 'none');
					} else {
					}
				}
			}
		};	// End of function loadToggle()
		function loadToggleBlur() {
			for (var xt = 0; xt < 8; xt++) {
				if(allButtons[xt]){
					var layerPreToggleBlur = allTogglesBlur[currentSlide][xt];
					if (layerPreToggleBlur!=='undefined') {
						mapYearBlur.setLayoutProperty(layerPreToggleBlur, 'visibility', 'none');
					} else {
					}
				}
			}
		};	// End of function loadToggleBlur()
		function loadToggleYear() {
			for (var yt = 0; yt < 8; yt++) {
				if(allButtons[yt]){
					var layerPreToggleYear = allToggles[currentSlide][yt];
					if (layerPreToggleYear!=='undefined') {
						mapYearBlur.setLayoutProperty(layerPreToggleYear, 'visibility', 'none');
					} else {
					}
				}
			}
		};	// End of function loadToggleBlur()
    </script>

    <script src="js/d3.v3.min.js"></script>
	<script>
		var lineChart;
		// Set the dimensions of the canvas / graph
		var	margin = {top: 32, right: 0, bottom: 32, left: 0},
		width = 960 + margin.left + margin.right,
		height = 265 - margin.bottom,
		heightBox = 265;

		// Parse the date / time
		var	parseDate = d3.time.format("%d-%b-%y").parse;
		// Set the ranges
		var	x = d3.time.scale().range([0, width-12]);
		var	y = d3.scale.linear().range([height, 13]);

		// Define the axes
		var	xAxis = d3.svg.axis().scale(x)
			.orient("top").ticks(18).tickSize(height+32, 0);;

		var	yAxis = d3.svg.axis().scale(y)
			.orient("left").ticks(5);

		// Define the line
		var	valueline = d3.svg.line()
			.x(function(d) { return x(d.date); })
			.y(function(d) { return y(d.prices); });

		// Adds the svg canvas
		var svg = d3.select(".ub-graphic-container")
			.append("svg")
			.attr("viewBox","0 0 "+width+" "+heightBox)
			.attr("preserveAspectRatio","xMinYMin meet")
			.classed("ub-content-responsive", true)
			.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
			.classed("ub-line-container","true");

        // Graph title
        var svgText = d3.select("svg")
            .append("g")
            .classed("ub-graph-title", "true")
            .append('text')
            .text('An interactive look at the boom and bust')
            .attr("transform", "translate(20,30)");

        // Graph line legend
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-name", "true")
             .append('text')
             .text('Home')
             .attr("transform", "translate(200,177)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-name", "true")
             .append('text')
             .text('Price')
             .attr("transform", "translate(200,199)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-name", "true")
             .append('text')
             .text('Index')
             .attr("transform", "translate(200,221)");

       // Graph first caption
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption-title", "true")
             .append('text')
             .text('2001: Baseline')
             .attr("transform", "translate(20,81)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('Reasonable credit standards,')
             .attr("transform", "translate(20,98)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('low prices')
             .attr("transform", "translate(20,115)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('12.6 million new mortgages')
             .attr("transform", "translate(20,132)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('14% Black or Hispanic')
             .attr("transform", "translate(20,149)");

        // Graph second caption
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption-title", "true")
             .append('text')
             .text('2006: A boom')
             .attr("transform", "translate(273,183)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('Easy credit, high prices')
             .attr("transform", "translate(273,200)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('12.2 million new mortgages')
             .attr("transform", "translate(273,217)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('25% Black or Hispanic')
             .attr("transform", "translate(273,234)");
        // Graph third caption
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption-title", "true")
             .append('text')
             .text('2009: A bust')
             .attr("transform", "translate(418,39)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('Tight credit, reduced prices')
             .attr("transform", "translate(418,56)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('8.3 million new mortgages')
             .attr("transform", "translate(418,73)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('12% Black or Hispanic')
             .attr("transform", "translate(418,90)");
        // Graph fourth caption
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption-title", "true")
             .append('text')
             .text('2019: Uneven recovery')
             .attr("transform", "translate(797,170)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('Tight credit, record high prices')
             .attr("transform", "translate(757,187)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('7.4 million new mortgages')
             .attr("transform", "translate(784,204)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-caption", "true")
             .append('text')
             .text('19% Black or Hispanic')
             .attr("transform", "translate(809,221)");

        // Graph first number
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-month", "true")
             .append('text')
             .text('Jan. 2001')
             .attr("transform", "translate(20,193)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-month-number", "true")
             .append('text')
             .text('108.5')
             .attr("transform", "translate(20,210)");
        // Graph first number line
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-line", "true")
             .append('line')
             .attr("x1", "6")
             .attr("y1", "188")
             .attr("x2", "6")
             .attr("y2", "236");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-line", "true")
             .append('line')
             .attr("x1", "6")
             .attr("y1", "188")
             .attr("x2", "18")
             .attr("y2", "188");
        // Graph second number
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-month", "true")
             .append('text')
             .text('Jun. 2006')
             .attr("transform", "translate(272,141)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-month-number", "true")
             .append('text')
             .text('175.5')
             .attr("transform", "translate(272,158)");
        // Graph second number line
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-line", "true")
             .append('line')
             .attr("x1", "277")
             .attr("y1", "110")
             .attr("x2", "277")
             .attr("y2", "126");
        // Graph third number
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-month", "true")
             .append('text')
             .text('Apr. 2009')
             .attr("transform", "translate(416,125)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-month-number", "true")
             .append('text')
             .text('144.1')
             .attr("transform", "translate(416,142)");
        // Graph third number line
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-line", "true")
             .append('line')
             .attr("x1", "419")
             .attr("y1", "148")
             .attr("x2", "419")
             .attr("y2", "162");
        // Graph fourth number
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-month", "true")
             .append('text')
             .text('Dec. 2019')
             .attr("transform", "translate(872,123)");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-month-number", "true")
             .append('text')
             .text('201.6')
             .attr("transform", "translate(899,140)");
        // Graph fourth number lines
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-line", "true")
             .append('line')
             .attr("x1", "954")
             .attr("y1", "51")
             .attr("x2", "954")
             .attr("y2", "118");
        var svgText = d3.select("svg")
             .append("g")
             .classed("ub-graph-line", "true")
             .append('line')
             .attr("x1", "944")
             .attr("y1", "118")
             .attr("x2", "954")
             .attr("y2", "118");

		// Get the data
		d3.csv("data/hmdadata-2019.csv", function(error, data) {
			data.forEach(function(d) {
				d.date = parseDate(d.date);
				d.prices = d.prices;
			});

            // Scale the range of the data
            x.domain(d3.extent(data, function(d) { return d.date; }));
            y.domain([100, d3.max(data, function(d) { return d.prices; })]);

            // Add the X Axis
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(6," + height + ")")
                .call(xAxis);

            d3.csv("data/hmdadatapoints-2019.csv", function(error, datapoints) {
                datapoints.forEach(function(d) {
                    d.date = parseDate(d.date);
                    d.prices = d.prices;
                });

    			// Add the valueline path
    			lineChart = svg.append("path")
    				.attr("transform", "translate(6,0)")
    				.attr("class", "line")
    				.attr("d", valueline(data));
    			// });


			// Draw four points over the line
			// d3.csv("data/hmdadatapoints-2019.csv", function(error, datapoints) {
			// 	datapoints.forEach(function(d) {
			// 		d.date = parseDate(d.date);
			// 		d.prices = d.prices;
			// 	});
				var circles = svg.append("g")
					.attr("class", "ub-points")
					.selectAll('circle')
					.data(datapoints)
    				.enter()
					.append('circle')
					.attr("transform", "translate(6,0)")
					.attr('cy', function(d){
						return y(d.prices);
					})
					.attr('cx', function(d){
						return x(d.date);
					})
					.attr('r',6);


            });
		});


	</script>




<script>
(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () { 
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),  m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m) 
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga'); 
ga('create', 'UA-57529944-1', 'auto'); 
ga('send', 'pageview');
</script>

<!-- START Parse.ly Include: Standard -->
<div id="parsely-root" style="display: none">
  <span id="parsely-cfg" data-parsely-site="urban.org"></span>
</div>
<script>
    (function(s, p, d) {
      var h=d.location.protocol, i=p+"-"+s,
          e=d.getElementById(i), r=d.getElementById(p+"-root"),
          u=h==="https:"?"d1z2jf7jlzjs58.cloudfront.net"
          :"static."+p+".com";
      if (e) return;
      e = d.createElement(s); e.id = i; e.async = true;
      e.src = h+"//"+u+"/p.js"; r.appendChild(e);
    })("script", "parsely", document);
</script>
<!-- END Parse.ly Include: Standard -->





  </body>
</html>
